{% load static %}

{% if user.username == request.user.username %}
  <h2>My Profile</h2>
{% else %}
  <h2>{{ user.username }}'s profile</h2>
{% endif %}

{% if error_message %}
  <p style="color: red;">{{ error_message }}</p>
{% endif %}

{% if success_message %}
  <p style="color: green;">{{ success_message }}</p>
{% endif %}

<p><strong>Username:</strong> {{ user.username }}</p>
<p><strong>Email:</strong> {{ user.email }}</p>
<p><strong>Elo:</strong> {{ user.elo }}</p>
<p><strong>Wins:</strong> {{ user.win }}</p>
<p><strong>Defeats:</strong> {{ user.defeat }}</p>
<p><strong>Joined on:</strong> {{ user.created_at|date:"F j, Y" }}</p>

{% if user.username == request.user.username %}
  <a href="/logout" class="link btn btn-danger">Logout</a>
{% else %}
  <form action="/ssr/view/profile/" method="post">
    {% csrf_token %}
    <input type="hidden" name="action" value="friend">
    <input type="hidden" name="type" value="add">
    <input type="hidden" name="profile" value="{{ user.username }}">
    <button type="submit" class="btn btn-success">Friend Request</button>
  </form>

  <form action="/ssr/view/profile/" method="post">
    {% csrf_token %}
    <input type="hidden" name="action" value="friend">
    <input type="hidden" name="type" value="remove">
    <input type="hidden" name="profile" value="{{ user.username }}">
    <button type="submit" class="btn btn-danger">Friend Remove</button>
  </form>

  <form action="/ssr/view/profile/" method="post">
    {% csrf_token %}
    <input type="hidden" name="action" value="blocked">
    <input type="hidden" name="type" value="add">
    <input type="hidden" name="profile" value="{{ user.username }}">
    <button type="submit" class="btn btn-danger">Block Request</button>
  </form>

  <form action="/ssr/view/profile/" method="post">
    {% csrf_token %}
    <input type="hidden" name="action" value="blocked">
    <input type="hidden" name="type" value="remove">
    <input type="hidden" name="profile" value="{{ user.username }}">
    <button type="submit" class="btn btn-info">Unblock Request</button>
  </form>
{% endif %}